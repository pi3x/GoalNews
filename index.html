<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GoalNewsDE - Fu√üball-News & Tabellen</title>

    <link rel="icon" href="https://i.ibb.co/21R6p75W/Logo-1.jpg" type="image/jpeg">
    <link rel="stylesheet" href="style.css">

    <meta name="theme-color" content="#1db954">
    <link rel="apple-touch-icon" href="https://i.ibb.co/21R6p75W/Logo-1.jpg">
    <link rel="manifest" href="manifest.json">
</head>

<body>
    <!-- üî• Breaking News -->
    <div id="breakingNews">
        <div class="news-wrapper" id="newsWrapper">
            <span class="news-item">Am. Football: Am 9.11.2025: Berlin-Game Indianapolis Colts - Atlanta Falcons</span>
            <span class="news-item">Comeback von Alphonso Davies: "Er ist schon wieder mit Ball beim Training"!</span>
            <span class="news-item">Der Spielplan des Borussia Dortmund im November ist vollgepackt ‚Äì gleich sechs Pflichtspiele in Bundesliga und Champions League stehen an.</span>
            <span class="news-item">Borussia Dortmund besiegt FC Augsburg 1:0 dank Treffer von Serhou Guirassy ‚Äì ein Statement vorm Kracher gegen Man City.</span>
            <span class="news-item">Erstes Gegentor nach 25 Sekunden: Union-Frauen kassieren gegen Bremen vierte Saisonniederlage!</span>
            <span class="news-item">Sky-Experte Didi Hamann √ºber Wagner: "Jetzt auf ihn loszugehen, halte ich nicht f√ºr richtig"</span>
        </div>
    </div>

    <!-- üîù Header -->
    <header>
        <div class="logo">GoalNewsDE</div>

        <!-- üîç Suchfeld -->
        <div class="search-container">
            <input type="text" id="siteSearch" placeholder="üîç Suche nach News, Spielen, Live-Ticker..." />
            <div id="searchResults"></div>
        </div>
    </header>

    <!-- üí• Hero -->
    <div class="hero-container">
        <div class="hero-text">Offizielle Website von GoalNewsDE ‚Äì Alle Fu√üball-News auf einen Blick!</div>
        <div class="hero-buttons">
            <a href="bundesliga.html" class="hero-button">1. Bundesliga</a>
            <a href="2liga.html" class="hero-button">2. Bundesliga</a>
            <a href="lastgameday.html" class="hero-button">Letzter Spieltag</a>
            <a href="statistics.html" class="hero-button">Statistiken</a>
            <a href="news.html" class="hero-button">News</a>
            <a href="login.html" class="hero-button">Secret</a>
            <a href="comments.html" class="hero-button">Kommentar Forum</a>
            <a href="votings.html" class="hero-button">Abstimmungen</a>
            <a href="football.html" class="hero-button">Am. Football</a>
        </div>
    </div>

    <div class="socials">
        <a href="https://whatsapp.com/channel/0029Vb7PDwN8V0toB3ATWZ1Y" target="_blank">WhatsApp</a>
        <a href="https://youtube.com/" target="_blank">YouTube</a>
    </div>

    <div class="countdown-section">
        <h2>‚è±Ô∏è 1. Sonntagsspiel startet in:</h2>
        <div id="countdown">lade...</div>
    </div>

    <!-- ‚öΩ Spieltag -->
    <div class="matches" id="matchesSection">
        <h2>‚öΩ Bundesliga - Spieltag 9 (31. Oktober - 2. November)</h2>
        <h4>Freitag:</h4>
        <h3>FC Augsburg - Borussia Dortmund</h3>
        <h4>Samstag:</h4>
        <h3>
            Mainz 05 1:1 Werder Bremen (FT)<br>
            RB Leipzig 3:1 VfB Stuttgart (FT)<br>
            Union Berlin 0:0 SC Freiburg (FT)<br>
            FC St. Pauli 0:4 Bor. M√∂nchengladbach (FT)<br>
            FC Heidenheim 1:1 Eintracht Frankfurt (FT)<br>
            <strong style="color: gold;">Topspiel: Bayern M√ºnchen 3:0 Bayer Leverkusen (FT)</strong>
        </h3>
        <h4>Sonntag:</h4>
        <h3>
            1. FC K√∂ln - Hamburger SV (15:30 Uhr)<br>
            VfL Wolfsburg - TSG Hoffenheim (17:30 Uhr)
        </h3>
    </div>

    <!-- üü¢ Live-Ticker -->
    <div class="ticker-wrapper">
        <div class="ticker" id="ticker"></div>
    </div>

    <!-- ‚ö†Ô∏è Problem melden -->
    <div id="reportSection" style="text-align:center; margin:50px 0;">
        <button id="reportButton">‚ö†Ô∏è Problem melden</button>
        <div id="reportForm" style="display:none; margin-top:20px;">
            <h3>üõ†Ô∏è Fehler melden</h3>
            <select id="errorType">
                <option value="Sicherheitsfehler">Sicherheitsfehler</option>
                <option value="Anzeigeproblem">Anzeigeproblem</option>
                <option value="Falsche Information">Falsche Information</option>
                <option value="Kommentarproblem">Kommentarproblem</option>
                <option value="Anderes">Anderes</option>
            </select><br>
            <textarea id="errorDescription" rows="4" placeholder="Beschreibe den Fehler..."></textarea><br>
            <button id="sendReport" type="button">üì® Absenden</button>
        </div>
    </div>

    <footer>
        GoalNewsDE ¬© 2025 ‚Äì Don‚Äôt steal our stuff.
        <a href="mailto:info@goalnewsde.de">Email</a> | <a href="agb.html">Datenschutz</a> | <a href="security.html">Sicherheit</a>
    </footer>

    <!-- üîß Scripts -->
    <script src="js/config.js"></script>
    <script src="js/google-sheets-client.js"></script>
    <script src="js/table-renderer.js"></script>
    <script src="js/sheets-api.js"></script>
    <script src="js/auto-refresh.js"></script>

    <script>
        // === Countdown ===
        const matchDate = new Date("November 2, 2025 15:30:00").getTime();
        const countdownEl = document.getElementById("countdown");
        setInterval(() => {
            const diff = matchDate - new Date().getTime();
            if (diff < 0) return countdownEl.textContent = "Anpfiff!";
            const d = Math.floor(diff / (1000 * 60 * 60 * 24));
            const h = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const m = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const s = Math.floor((diff % (1000 * 60)) / 1000);
            countdownEl.textContent = `${d}d ${h}h ${m}m ${s}s`;
        }, 1000);

        // === Erweiterte Suchfunktion (scrapt Unterseiten) ===
        const pagesToSearch = [
            "news.html",
            "bundesliga.html",
            "2liga.html",
            "lastgameday.html",
            "statistics.html",
            "votings.html",
            "comments.html",
            "football.html",
            "login.html",

        ];

        const siteSearch = document.getElementById("siteSearch");
        const searchResults = document.getElementById("searchResults");

        let siteCache = {};

        async function fetchPageContent(url) {
            if (siteCache[url]) return siteCache[url];
            try {
                const res = await fetch(url);
                const text = await res.text();
                siteCache[url] = text.replace(/<[^>]*>/g, " "); // HTML Tags entfernen
                return siteCache[url];
            } catch {
                return "";
            }
        }

        siteSearch.addEventListener("input", async () => {
            const q = siteSearch.value.trim().toLowerCase();
            searchResults.innerHTML = "";
            if (!q) {
                searchResults.style.display = "none";
                return;
            }

            let results = [];

            // Hauptseite durchsuchen
            document.querySelectorAll("h2, h3, h4, p, .news-item").forEach(el => {
                if (el.textContent.toLowerCase().includes(q)) {
                    results.push({ title: el.textContent.trim().slice(0, 80), link: "#" });
                }
            });

            // Unterseiten durchsuchen
            for (const page of pagesToSearch) {
                const content = await fetchPageContent(page);
                if (content.toLowerCase().includes(q)) {
                    results.push({ title: `Treffer auf ${page}`, link: page });
                }
            }

            if (results.length === 0) {
                searchResults.innerHTML = "<div class='result-item'>‚ùå Keine Treffer gefunden</div>";
            } else {
                results.slice(0, 8).forEach(r => {
                    const div = document.createElement("div");
                    div.className = "result-item";
                    div.innerHTML = `üìç <a href="${r.link}" target="_blank">${r.title}</a>`;
                    searchResults.appendChild(div);
                });
            }

            searchResults.style.display = "block";
        });
    </script>

    <!-- üî• Firebase Problem melden -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.0/firebase-app.js";
        import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/11.0.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBmIcdFtxv4jBJKdiAkEiwnkQ8yRwiG_0w",
            authDomain: "goalnewsde-community.firebaseapp.com",
            projectId: "goalnewsde-community",
            storageBucket: "goalnewsde-community.firebasestorage.app",
            messagingSenderId: "134523022055",
            appId: "1:134523022055:web:4f35ed7812d06e4fb55042"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        document.addEventListener("DOMContentLoaded", () => {
            const btn = document.getElementById("reportButton");
            const form = document.getElementById("reportForm");
            const send = document.getElementById("sendReport");
            const type = document.getElementById("errorType");
            const desc = document.getElementById("errorDescription");

            btn.addEventListener("click", () => {
                form.style.display = form.style.display === "none" ? "block" : "none";
            });

            send.addEventListener("click", async () => {
                if (!desc.value.trim()) return alert("Bitte eine Beschreibung eingeben!");
                try {
                    await addDoc(collection(db, "reports"), {
                        type: type.value,
                        description: desc.value.trim(),
                        created: serverTimestamp()
                    });
                    alert("‚úÖ Vielen Dank! Dein Bericht wurde anonym gesendet.");
                    desc.value = "";
                    form.style.display = "none";
                } catch (e) {
                    alert("‚ùå Fehler beim Senden.");
                    console.error(e);
                }
            });
        });
    </script>

    <script async defer src="https://apis.google.com/js/api.js"></script>
</body>
</html>
